<div class="combobox-container"
     [class.combobox-disabled]="disabled"
     [class.combobox-selected]="!!selectedItem">
  <div class="input-group">
    <input type="text"
           autocomplete="false"
           [placeholder]="placeholder"
           class="combobox form-control"
           [disabled]="disabled"
           [value]="this.selectedItem ? this.selectedItem.label : this.search"
           (input)="onSearchChange($event.target.value)"
           (keydown.arrowup)="onArrowUp($event)"
           (keydown.arrowdown)="onArrowDown($event)"
           (keyup.enter)="onEnterDown($event)"
           (keyup.escape)="onEscapeDown($event)"
           #searchInput>
    <ul class="typeahead typeahead-long dropdown-menu"
        [style.display]="isOpen && filteredItems.length > 0 ? 'block' : 'none'"
        #panel>
      <li *ngFor="let item of filteredItems; let i = index"
          [class.active]="activeElementIndex === i"
          (mouseover)="setActiveIndex(i)">
        <a (click)="selectItem(item)">
          {{ item.label }}
        </a>
      </li>
    </ul>
    <div class="input-group-btn">
      <button class="btn btn-default dropdown-toggle"
              (click)="selectedItem ? cancelSelection($event) : togglePanel($event)">
        <span class="caret"></span>
        <span class="glyphicon glyphicon-remove"></span>
      </button>
    </div>
  </div>
</div>
